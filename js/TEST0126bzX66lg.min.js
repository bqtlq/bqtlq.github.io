var slideVerify,slideVerify2,SlideVerifyPlug=window.slideVerifyPlug,flagSlider=!1,flagMobile=!1,flagSMScode=!1;function subReg(e){if(flagSlider&&flagMobile&&flagSMScode){var o=0;return(o=getByteLen($("#password").val()))<6||20<o?!1:!!$("#protocol").prop("checked")&&void e.submit()}return!1}function checkRegInfo(){if(flagSlider&&flagMobile&&flagSMScode){var e=0;return(e=getByteLen($("#password").val()))<6||20<e?!1:!!$("#protocol").prop("checked")}return!1}function getLogTip(e,o){var t="";switch(e){case 0:t="密码位数少于6位！";break;case-1:case-4:t="手机号或者密码不正确！";break;case-2:t="密码为空或者非法";break;case-5:case-3:t=o;break;case-6:t="用户被锁定！";break;default:t=""}$(".error-log-tip").html(t)}function checkLogInfo(){var e,o=$("#password5").val(),t=$("#mobile5").val();if($(".error-log-tip").html(""),e=getByteLen(o),!checkMobile(t))return!1;if(e<6)return getLogTip(0,""),!1;let r=!1;$.post("/member/public_check_log",{mobile:t,pwd:o,domysub5:1},function(e){var o=e.rid,t=e.times;1===o?(r=!0,location.reload()):(getLogTip(o,-3===o?"密码错误次数已达5次，请"+e.minute+"分钟后再试！":-5===o?t<2?"手机号或者密码不正确！":"当前密码错误次数"+t+"次，连续输错5次后将锁定60分钟！":""),r=!1)},"json")}$(function(){slideVerify=new SlideVerifyPlug("#verify-wrap",{initText:"请按住滑块，拖动到最右边",sucessText:"验证通过",getSucessState:function(e){(flagSlider=e)&&flagMobile?($("#isGetVerify").attr("disabled",!1),$("#dosubmit").attr("disabled",!1)):($("#isGetVerify").attr("disabled",!0),flagSlider?$("#dosubmit").attr("disabled",!1):$("#dosubmit").attr("disabled",!0))}}),$.formValidator.initConfig({autotip:!0,formid:"myform",onerror:function(e){}}),0<$("#mobile").length&&$("#mobile").formValidator({onshow:"请输入手机号码",onfocus:"请输入手机号码"}).inputValidator({min:1,max:11,onerror:"请输入正确的手机号码"}).regexValidator({regexp:"mobile",datatype:"enum",onerror:"请输入正确的手机号码"}).ajaxValidator({type:"get",url:"",data:"m=member&c=index&a=public_checkmobilenumber_ajax",datatype:"html","async":"false",success:function(e){return"1"==e?(flagMobile=!0,flagSlider&&flagMobile?$("#isGetVerify").attr("disabled",!1):$("#isGetVerify").attr("disabled",!0),!0):(flagMobile=!1,$("#isGetVerify").attr("disabled",!0),!1)},buttons:$("#dosubmit"),onerror:"手机号不正确或已存在",onwait:"请稍候..."}),$("#password").formValidator({onshow:"请输入密码",onfocus:"密码应该为6-20位之间"}).inputValidator({min:6,max:20,onerror:"密码应该为6-20位之间"}),$("#mobile_verify").formValidator({onshow:"请输入手机收到的验证码",onfocus:"请输入手机收到的验证码"}).inputValidator({min:1,onerror:"请输入手机收到的验证码"}).ajaxValidator({type:"get",url:"api.php",data:"op=sms_idcheck&action=id_code",getdata:{mobile:"mobile"},datatype:"html","async":"false",success:function(e){return flagSMScode="1"==e},buttons:$("#dosubmit"),onerror:"验证码错误",onwait:"请稍候..."}),$(":checkbox[name='protocol']").formValidator({tipid:"protocoltip",onshow:"请阅读协议",onfocus:"请阅读协议",oncorrect:"已阅读"}).inputValidator({min:1,onerror:"请阅读协议"}),$("#isGetVerify").click(function(){if($("#isGetVerify").attr("disabled"))return!1;if(!slideVerify.slideFinishState)return!1;var e=$("#mobile").val();if(!/^1[3-9]\d{9}$/.test(e))return layer.msg("请输入正确的手机号码",{icon:2,time:1250}),$("#mobile").focus(),!1;$.get("api.php?op=sms",{scense:"register",mobile:e,session_code:"123456",random:Math.random()},function(e){"200"==e.code?function o(){0==t?(r.attr("disabled",!1),r.text("获取验证码"),t=90):(r.attr("disabled",!0),r.text(t+"秒后再获取"),t--,setTimeout(function(){o()},1e3))}():console.log(e)})});var t=90,r=$("#isGetVerify")}),$(function(){$.formValidator.initConfig({autotip:!0,formid:"myform5",onerror:function(e){}}),0<$("#mobile5").length&&$("#mobile5").formValidator({onshow:"请输入手机号码",onfocus:"请输入手机号码"}).regexValidator({regexp:"mobile",datatype:"enum",onerror:"请输入正确的手机号码"})});var flagSlider2=!1,flagMobile2=!1,flagSMScode2=!1;function clearFgtInfo(){$("#mobile8").val(""),$("#mobile_verify2").val(""),$(".error-fgt-tip").html(""),flagSMScode2=flagMobile2=flagSlider2=!1,$("#dosubmit8").attr("disabled",!0),$("#isGetVerify2").attr("disabled",!0),slideVerify2.resetVerify(),$.formValidator.resetTipState("8")}function getFgtTip(e){var o="",o=-1===e?"手机号或者验证码有误！":"其他错误";$(".error-fgt-tip").html(o)}function checkFgtInfo(){var e=$("#mobile8").val(),o=$("#mobile_verify2").val();return $(".error-fgt-tip").html(""),!!checkMobile(e)&&(!!checkYZM(o)&&void $.post("/member/public_check_fgt",{mobile:e,yzm:o,domysub8:1},function(e){e=e.rid;1===e?(closeForm(8),openForm(9)):getFgtTip(e)},"json"))}function getResetTip(e){var o="";switch(e){case 0:o="设置的密码位数少于6位或者超过20位！";break;case-1:o="手机号或者验证码有误！";break;case-2:o="两次输入的密码不一致！";break;default:o="其他错误"}$(".error-reset-tip").html(o)}function clearResetInfo(){$("#password9").val(""),$("#password10").val(""),$(".error-reset-tip").html(""),$.formValidator.resetTipState("9")}function checkResetInfo(){var e=$("#mobile8").val(),o=$("#mobile_verify2").val();if($(".error-reset-tip").html(""),!checkMobile(e))return!1;if(!checkYZM(o))return!1;var t=$("#password9").val();return getByteLen(t)<6?(getResetTip(0),!1):t!=$("#password10").val()?(getResetTip(-2),!1):void $.post("/member/public_check_reset",{mobile:e,yzm:o,pwd:t,domysub9:1},function(e){e=e.rid;1===e?(clearResetInfo(),clearFgtInfo(),closeForm(9),showOkInfo("重置密码成功，请重新登录！"),openForm(2)):getResetTip(e)},"json")}$(function(){slideVerify2=new SlideVerifyPlug("#verify-wrap2",{initText:"请按住滑块，拖动到最右边",sucessText:"验证通过",getSucessState:function(e){(flagSlider2=e)&&flagMobile2?($("#isGetVerify2").attr("disabled",!1),$("#dosubmit8").attr("disabled",!1)):($("#isGetVerify2").attr("disabled",!0),flagSlider2?$("#dosubmit8").attr("disabled",!1):$("#dosubmit8").attr("disabled",!0))}}),$.formValidator.initConfig({validatorgroup:"8",autotip:!0,formid:"myform8",onerror:function(e){}}),$("#mobile8").formValidator({validatorgroup:"8",onshow:"请输入手机号码",onfocus:"请输入手机号码"}).inputValidator({min:1,max:11,onerror:"请输入正确的手机号码"}).regexValidator({regexp:"mobile",datatype:"enum",onerror:"请输入正确的手机号码"}).ajaxValidator({type:"get",url:"",data:"m=member&c=index&a=public_checkmobnum2_ajax",datatype:"html","async":"false",success:function(e){return"1"==e?(flagMobile2=!0,flagSlider2&&flagMobile2?$("#isGetVerify2").attr("disabled",!1):$("#isGetVerify2").attr("disabled",!0),!0):(flagMobile2=!1,$("#isGetVerify2").attr("disabled",!0),!1)},buttons:$("#dosubmit8"),onerror:"手机号不正确!",onwait:"请稍候..."}),$("#mobile_verify2").formValidator({validatorgroup:"8",onshow:"请输入手机收到的验证码",onfocus:"请输入手机收到的验证码"}).inputValidator({min:1,onerror:"请输入手机收到的验证码"}).ajaxValidator({type:"get",url:"api.php",data:"op=sms_idcheck&action=id_code",getdata:{mobile:"mobile8",mobile_verify:"mobile_verify2"},datatype:"html","async":"false",success:function(e){return flagSMScode2="1"==e},buttons:$("#dosubmit8"),onerror:"验证码错误",onwait:"请稍候..."}),$("#isGetVerify2").click(function(){if($("#isGetVerify2").attr("disabled"))return!1;if(!slideVerify2.slideFinishState)return!1;var e=$("#mobile8").val();if(!/^1[3-9]\d{9}$/.test(e))return $("#mobile8").focus(),!1;$.get("api.php?op=sms",{scense:"resetpwd",mobile:e,session_code:"123456",random:Math.random()},function(e){"200"==e.code?function o(){0==t?(r.attr("disabled",!1),r.text("获取验证码"),t=90):(r.attr("disabled",!0),r.text(t+"秒后再获取"),t--,setTimeout(function(){o()},1e3))}():console.log(e)})});var t=90,r=$("#isGetVerify2");$.formValidator.initConfig({validatorgroup:"9",autotip:!0,formid:"myform9",onerror:function(e){}}),$("#password9").formValidator({validatorgroup:"9",onshow:"请输入密码",onfocus:"密码应该为6-20位之间"}).inputValidator({min:6,max:20,onerror:"密码应该为6-20位之间"}),$("#password10").formValidator({validatorgroup:"9",onshow:"请再次输入密码",onfocus:"与前一次密码应相同",oncorrect:"密码一致"}).inputValidator({min:1,empty:{leftempty:!1,rightempty:!1,emptyerror:"重复密码两边不能有空符号"},onerror:"重复密码不能为空,请确认"}).compareValidator({desid:"password9",operateor:"=",onerror:"两次输入密码不一致,请确认！"})});
